<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BITSCRY - THE DIVINE BLOCKCHAIN</title>
    <style>
        :root {
            --white: #FFFFFF; --blue: #0000AA; --red: #AA0000; --cyan: #00AAAA;
            --purple: #AA00AA; --yellow: #FFFF55; --black: #000000; --green: #00AA00;
        }
        body { 
            margin: 0; background-color: var(--black); 
            font-family: "Courier New", monospace; color: var(--white);
            overflow: hidden; image-rendering: pixelated;
        }
        #vga-frame {
            width: 100vw; height: 100vh;
            border: 8px ridge var(--cyan); box-sizing: border-box;
            display: grid; grid-template-columns: 200px 1fr 250px;
        }
        .panel { border: 2px solid var(--blue); padding: 10px; position: relative; overflow: hidden; }
        .header { background: var(--blue); color: var(--white); font-weight: bold; text-align: center; margin: -10px -10px 10px -10px; padding: 2px; }
        
        #price-display { color: var(--yellow); font-size: 28px; text-align: center; text-shadow: 2px 2px var(--red); }
        #scripture-box { font-size: 12px; color: var(--white); font-style: italic; margin-top: 20px; border: 1px dashed var(--yellow); padding: 5px; }
        
        canvas { position: absolute; top: 0; left: 0; z-index: -1; }
        .stat-label { color: var(--cyan); font-size: 11px; }
        .stat-val { color: var(--white); font-weight: bold; }
    </style>
</head>
<body>

<div id="vga-frame">
    <div class="panel">
        <div class="header">SISYPHUS.PRC</div>
        <div class="stat-label">MEMPOOL_WEIGHT:</div>
        <div id="mempool-val" class="stat-val">... vB</div>
        <div id="sisyphus-anim" style="font-size: 40px; margin-top: 50px;">(o_/)_O</div>
        <p style="font-size: 10px; color: var(--purple); margin-top: 20px;">"One must imagine Sisyphus happy in the chain."</p>
    </div>

    <div class="panel" style="border-width: 4px;">
        <div class="header">BITSCRY_ORACLE_64BIT</div>
        <div id="price-display">℥ ...</div>
        <div style="text-align:center; color: var(--green); font-size:12px;">DIVINE_HASHRATE: <span id="hash-val">0</span> EH/s</div>
        
        <canvas id="ritual-canvas"></canvas>
    </div>

    <div class="panel">
        <div class="header">PROPHET.LOG</div>
        <div id="log" style="font-size: 10px; color: var(--ltgray);"></div>
        <div id="scripture-box">
            "And God said, Let there be light: and there was light." <br>— Genesis 1:3
        </div>
    </div>
</div>

<script>
    const canvas = document.getElementById('ritual-canvas');
    const ctx = canvas.getContext('2d');
    let state = { price: 0, hash: 785_000_000_000_000_000_000n, ticks: 0, history: [] };

    function resize() {
        canvas.width = canvas.parentElement.clientWidth;
        canvas.height = canvas.parentElement.clientHeight;
    }
    window.addEventListener('resize', resize);
    resize();

    async function init() {
        const candles = await fetch('https://api.exchange.coinbase.com/products/BTC-USD/candles?granularity=3600').then(r => r.json());
        state.history = candles.slice(0, 12).map(c => c[4]).reverse(); // 12 Constellations

        const ws = new WebSocket('wss://ws-feed.exchange.coinbase.com');
        ws.onopen = () => ws.send(JSON.stringify({ type: "subscribe", channels: ["ticker", "matches"], product_ids: ["BTC-USD"] }));
        ws.onmessage = (e) => {
            const data = JSON.parse(e.data);
            if (data.type === 'ticker') {
                state.price = parseFloat(data.price);
                document.getElementById('price-display').innerText = `℥ ${state.price.toLocaleString()}`;
            }
            if (data.type === 'match') {
                const log = document.getElementById('log');
                const entry = document.createElement('div');
                entry.innerText = `FATE: ${data.size} BTC -> ${data.side.toUpperCase()}`;
                entry.style.color = data.side === 'buy' ? '#55FFFF' : '#FF5555';
                log.prepend(entry);
                if(log.childNodes.length > 20) log.lastChild.remove();
            }
        };

        setInterval(() => {
            state.hash += BigInt(Math.floor((Math.random()-0.5)*1000000000000000));
            document.getElementById('hash-val').innerText = (state.hash / 1_000_000_000_000_000_000n).toString();
        }, 2000);
    }

    function drawOracle() {
        const w = canvas.width, h = canvas.height;
        const cx = w/2, cy = h/2;
        state.ticks++;

        // 1. ZODIACAL RING (Geometry/Astronomy)
        ctx.strokeStyle = "#0000AA";
        ctx.lineWidth = 2;
        ctx.beginPath(); ctx.arc(cx, cy, 150, 0, Math.PI*2); ctx.stroke();
        
        const constellations = ["♈","♉","♊","♋","♌","♍","♎","♏","♐","♑","♒","♓"];
        constellations.forEach((s, i) => {
            const angle = (i * Math.PI * 2) / 12 + (state.ticks * 0.005);
            ctx.fillStyle = (i === Math.floor(state.ticks/100)%12) ? "#FFFF55" : "#AAAAAA";
            ctx.font = "20px Courier New";
            ctx.fillText(s, cx + Math.cos(angle)*170 - 10, cy + Math.sin(angle)*170 + 10);
        });

        // 2. THE MENORAH LEYLINE (Price/Biblical)
        if(state.history.length > 0) {
            ctx.strokeStyle = "#FFFF55"; // Gold
            ctx.beginPath();
            state.history.forEach((p, i) => {
                const x = cx - 100 + (i * 20);
                const y = cy + 50 - ((p - Math.min(...state.history)) / 100);
                if(i === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y);
                // Draw Candle base
                ctx.fillStyle = "#AA5500";
                ctx.fillRect(x-1, y, 2, cy+100-y);
            });
            ctx.stroke();
        }

        // 3. THE SPIRIT (64-bit Randomness)
        ctx.fillStyle = "#FF55FF";
        for(let i=0; i<3; i++) {
            const rx = cx + Math.sin(state.ticks*0.05 + i)*40;
            const ry = cy + Math.cos(state.ticks*0.03 + i)*40;
            ctx.fillRect(rx, ry, 4, 4);
        }
    }

    function frame() {
        ctx.fillStyle = "#FFFFFF"; ctx.fillRect(0,0,canvas.width,canvas.height);
        drawOracle();
        requestAnimationFrame(frame);
    }

    init(); frame();
</script>
</body>
</html>
